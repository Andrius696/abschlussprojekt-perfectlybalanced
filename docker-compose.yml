version: "3.1"
services:
  dienst:
    build: .
    ports:
      - "8080:8080"
    environment:
      - DB_HOST=datenbank
      - DB_PORT=1521
      - DB_USER=perfectlybalanced
      - DB_PASSWORD=whatdiditcost
    links:
      - datenbank
      - propay

  datenbank:
    container_name: datenbank
    image: oscarfonts/h2
    volumes:
      - ./datenbank:/opt/h2-data
    ports:
      #Port 81:81 f√ºr die H2-console
      - "81:81"
      - "1521:1521"
    environment:
      - H2_DATABASE=datenbank
      - H2_USER=perfectlybalanced
      - H2_PASSWORD=whatdiditcost
      - H2_ROOT_PASSWORD=everything

  propay:
    image: propra/propay
    ports:
      - "8888:8888"
    # Optional
    volumes:
      - ./data:/code/data